var main = document.getElementById("main");
var body = document.getElementById("body");

var ascii_space = {
    contents : [],
    sprites : [
        [
            "┌────────────────────────────────────────────────────────────────────────────────┐",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│     ┌────────────────────────────────────────────────────────────────────┐     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     └────────────────────────────────────────────────────────────────────┘     │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│     ┌───────────────────────┬──────────────────────────────────────┬─────┐     │",
            "│     │                       │                                      │  ○  │     │",
            "│     └───────────────────────┴──────────────────────────────────────┴─────┘     │",
            "│                                                                                │",
            "│     ──────────────────────────────────────────────────────────────────────     │",
            "│                                                                                │",
            "│     ──────────────────────────────────────────────────────────────────────     │",
            "│                                                                                │",
            "│     ──────────────────────────────────────────────────────────────────────     │",
            "│                                                                                │",
            "│     ┌───────────────────────┬──────────────────────────────────────┬─────┐     │",
            "│     │                       │                                      │  ○  │     │",
            "│     └───────────────────────┴──────────────────────────────────────┴─────┘     │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "└──┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┘",
            "   │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │  ",
            "   │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │  ",
            "   │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │  ",
            "   │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │  ",
            "   │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │  ",
            "   │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │  ",
            "   └─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┘  "
        ],
        [
            "                                      ──┬───────                                  ",
            "                                ──┬───  │       ────                              ",
            "                          ──────  │     │           ────                          ",
            "                    ──────        │     │               ────                      ",
            "              ──────              │     │    ┌─────         ────                  ",
            "        ──────                    │     │    │     ──────      ────               ",
            "     ───                          │     │    │           ──────     ────          ",
            "    /                             │     │    │                 ──────   ────      ",
            "   /                              │     │    │                       ────── ────  ",
            "  /                               │     │    │                             ──┐  │ ",
            " /                                │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                               │  │ ",
            "│                                 │     │    │                              ─┘  │ ",
            "│                                 │     │    │                         ────     │ ",
            "│                                 │     │    │                    ─────         │ ",
            "│                                 │     │    │               ─────              │ ",
            "│                                 │     │    │          ─────             ───┐  │ ",
            "│                                 │     │    │     ─────              ───┬ ○ │  │ ",
            "│                                 │     │    └─────               ────   │   ┘  │ ",
            "│                                 │     │                     ────       ┴───   │ ",
            "│                                 │     │                 ────        ───       │ ",
            "│                                 │     │             ┬───        ────     ──┐  │ ",
            "│                                 │     │         ────│       ────      ─┬─  │  │ ",
            "│                                 │     │     ────    │   ────       ─── │ ○ ┘  │ ",
            "│                                 │     │    ┌        ┴───        ───    ┴─── ─/  ",
            "│                                 │     │    │    ────          ──     ──   ─/    ",
            "│                                 │     │    └────           ───     ──   ─/      ",
            "│                                 │     │                  ──      ──   ─/        ",
            "│                                 │     │               ───      ──   ─/│         ",
            "│                                 │     │             ┬─     ───    ─/│ │         ",
            "│                                 │     │          ───│     ──    ─/│ │ │         ",
            "│                                 │     │        ──   │  ───    ─/│ │ │ │         ",
            "│                                 │     │     ───     ┴─      ─/│ │ │ │/          ",
            "│                                 │     │    ┌     ───      ─/│ │ │ │/            ",
            "│                                 │     │    │   ──       ─/│ │ │ │/              ",
            "│                                 │     │    └───       ─/│ │ │ │/                ",
            "│─┬──                             │     │             ─/│ │ │ │/                  ",
            "│ │ ┬─┬─┬─                        │     │           ─/│ │ │ │/                    ",
            "│ │ │ │ │ ┬─┬─                    │     │         ─/│ │ │ │/                      ",
            "│ │ │ │ │ │ │ ┬─┬─          ┌───  │     │       ─/│ │ │ │/                        ",
            "│ │ │ │ │ │ │ │ │ ┬─┬─      │  ───┘     │     ─/│ │ │ │/                          ",
            "│ │ │ │ │ │ │ │ │ │ │ ┬─┬─  │           │   ─/│ │ │ │/                            ",
            "└─┴─│ │ │ │ │ │ │ │ │ │ │ ┬─┼─          │──/│ │ │ │/                              ",
            "    ┴─┴─│ │ │ │ │ │ │ │ │ │ │ ┬─┬─┬     │ │ │ │ │/                                ",
            "        ┴─┴─│ │ │ │ │ │ │ │ │ │ │ │─┬─┬─┘ │ │ │/                                  ",
            "            ┴─┴─│ │ │ │ │ │ │ │ │ │ │ │ │ │ │/                                    ",
            "                ┴─┴─│ │ │ │ │ │ │ │ │ │ │ │/                                      ",
            "                    ┴─┴─│ │ │ │ │ │ │ │ │/                                        ",
            "                        ┴─┴─│ │ │ │ │ │/                                          ",
            "                            ┴─┴─│ │ │/                                            ",
            "                                ┴─┴─┘                                             "
        ],
        [
            "    ┌────────────────────────────────────────────────────────────────────┬───────┐",
            "   /                                                                     │       │",
            "  /                                                                      │       │",
            " /                                                                       │       │",
            "┌                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                        │       │",
            "│                                                                 ┌──────┘       │",
            "│                                                                 │              │",
            "│                                                                 │              │",
            "│                                                                 │              │",
            "│                                                                 │              │",
            "├─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┼─┬─┬─┬────────┘",
            "│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │         ",
            "│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │         ",
            "│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │         ",
            "│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │         ",
            "│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │         ",
            "│ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │         ",
            "└─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┘         "
        ],
        [
            "                                      ──────────                                  ",
            "                                ──────     /    ────                              ",
            "                          ──────          /         ────                          ",
            "                    ──────               /              ────                      ",
            "              ──────                    ┌                   ────                  ",
            "        ──────                    ──────│                       ────              ",
            "     ───                    ──────      │                           ────          ",
            "    /                 ──────            │                               ────      ",
            "   /            ──────                  │                               │   ────  ",
            "  /       ──────                        │                               │       │ ",
            " /  ──────                              │                               │       │ ",
            "────                                    │                               │       │ ",
            "│                                 │ │   │                               │       │ ",
            "│                             │ │ │ │   │                               │       │ ",
            "│                         │ │ │ │ │ │   │                               │       │ ",
            "│                         │ │ │ │ │ │   │                               │       │ ",
            "│                         │ │ │ │ │ │   │                               │       │ ",
            "│                         │ │ │ │ │ │   │                               │       │ ",
            "│                         │ │ │ │ │ │   │                               │       │ ",
            "│                         │ │ │ │ │ │   │                               │       │ ",
            "│                         │ │ │ │ │ │   │                               │       │ ",
            "│                         │ │ │ │ │ │   │                               │       │ ",
            "│                         │ │ │ │ │ │   │                               │       │ ",
            "│                         │ │ │ │ │ │   │                               │       │ ",
            "│                         │ │ │ │ │ │   │                               │       │ ",
            "│                         │ │ │ │ │ │   │                               │       │ ",
            "│                                       │                               │       │ ",
            "│                                       │                               │       │ ",
            "│                                       │                               │       │ ",
            "│                                       │                               │       │ ",
            "│                                       │                               │       │ ",
            "│                                       │                               │       │ ",
            "│                                       │                               │       │ ",
            "│                                       │                               │       │ ",
            "│                                       │                               │       │ ",
            "│                                       │                               │       │ ",
            "│                                       │                               │       │ ",
            "│                                       │                               │       │ ",
            "│                                       │                               │       │ ",
            "│                                       │                              /        │ ",
            "│                                       │                            /          │ ",
            "│                                       │                          /           /  ",
            "│                                       │                         │          /    ",
            "│                                       │                         │        /      ",
            "│                                       │                         │      /        ",
            "│                                       │                         │    /│         ",
            "│                                       │                         │  /│ │         ",
            "│                              ┌───     │                         │/│ │ │         ",
            "│                              │  |──┐  │                        /│ │ │ │         ",
            "│                              │     │  │                      /│ │ │ │ │         ",
            "│                              │───  │  │                    /│ │ │ │ │ │         ",
            "│                              │   ──│  │                  /│ │ │ │ │ │ │         ",
            "│                              ┤  ○  │  │                /│ │ │ │ │ │ │ │         ",
            "│                              └───  │  │              /│ │ │ │ │ │ │ │/          ",
            "│   ┌─────                         ──┘  │            /│ │ │ │ │ │ │ │/            ",
            "│   │     ────                          │          /│ │ │ │ │ │ │ │/              ",
            "│   │         ────                      │        /│ │ │ │ │ │ │ │/                ",
            "│   │             ────                  │      /│ │ │ │ │ │ │ │/                  ",
            "│   │ ┌─┐             ────              │    /│ │ │ │ │ │ │ │/                    ",
            "└───│ └─┘                 ────          │  /│ │ │ │ │ │ │ │/                      ",
            "    │───    ┌─┐               ────      │/│ │ │ │ │ │ │ │/                        ",
            "        ────└─┘                   ─┐    │ │ │ │ │ │ │ │/                          ",
            "            ────    ┌─┐            │    │ │ │ │ │ │ │/                            ",
            "                ────└─┘            │    │ │ │ │ │ │/                              ",
            "                    ────           │    │ │ │ │ │/                                ",
            "                        ────    ┌─┐│    │ │ │ │/                                  ",
            "                            ────└─┘│    │ │ │/                                    ",
            "                                ───┤    │ │/                                      ",
            "                                   └────└/                                        "
        ],
        [
            "    ┌────────────────────────────────────────────────────────────────────────┐    ",
            "   /                                                                          \\   ",
            "  /                                                                            \\  ",
            " /                                                                              \\ ",
            "┌────────────────────────────────────────────────────────────────────────────────┐",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                         ┌────────────────────────────┐                         │",
            "│                         │Quinn James Online          │     │  │  │  │  │  │    │",
            "│                         │                            │     │  │  │  │  │  │    │",
            "│                         │Press the power button to   │     │  │  │  │  │  │    │",
            "│                         │boot device.                │     │  │  │  │  │  │    │",
            "│                         │                            │     │  │  │  │  │  │    │",
            "│                         │                            │     │  │  │  │  │  │    │",
            "│                         │                            │     │  │  │  │  │  │    │",
            "│                         │                            │     │  │  │  │  │  │    │",
            "│                         │                            │     │  │  │  │  │  │    │",
            "│                         │                            │     │  │  │  │  │  │    │",
            "│                         │                            │     │  │  │  │  │  │    │",
            "│                         │                            │     │  │  │  │  │  │    │",
            "│                         │                            │     │  │  │  │  │  │    │",
            "│                         │                            │     │  │  │  │  │  │    │",
            "│                         │                            │                         │",
            "│                         │                            │                         │",
            "│                         │                            │                         │",
            "│                         │                            │                         │",
            "│                         │                            │                         │",
            "│                         └────────────────────────────┘                         │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                    ┌─────┐     │",
            "│                                                                    │  |  │     │",
            "│                                                                    │     │     │",
            "│                                                                    │─────│     │",
            "│                                                                    │     │     │",
            "│                                                                    │  ○  │     │",
            "│                                                                    └─────┘     │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│                                                                                │",
            "│     ┌────────────────────────────────────────────────────────────────────┐     │",
            "│     │   ○                                                            ○   │     │",
            "│     │                                                                    │     │",
            "│     │                                                                    │     │",
            "│     │ ┌─┐ ┌─┐ ┌────────────────┐ ┌───────────────────────┐ ┌───┐ ┌─┐ ┌─┐ │     │",
            "│     │ └─┘ └─┘ └────────────────┘ └───────────────────────┘ └───┘ └─┘ └─┘ │     │",
            "│     ├────────────────────────────────────────────────────────────────────┤     │",
            "└─────┘                                                                    └─────┘"
        ]
    ],
    current_sprite : 0
};

var screen_space = {
    contents : [],
    screen_row : 5,
    screen_col : 7,
    screen_width : 68,
    screen_height : 32
};

var terminal = {
    contents : [],
    enabled : false,
    scroll_point : 0,
    max_command_length : screen_space.screen_width
};

function init() {
    for(let i = 0; i < ascii_space.sprites[0].length; i++) {
        ascii_space.contents.push(new Array(ascii_space.sprites[0][0].length));
    }
    for(let i = 0; i < screen_space.screen_height; i++) {
        screen_space.contents.push(new Array(screen_space.screen_width));
    }
    blit_ascii();
    blit();
}

function turning_animation() {
    if(ascii_space.current_sprite === 0) {
        let scheduled_sprite = ascii_space.current_sprite;
        for(let time = 0; scheduled_sprite <= 4; time += 250, scheduled_sprite++)
            setTimeout(setAsciiSprite,time,scheduled_sprite);
    } else {
        let scheduled_sprite = ascii_space.current_sprite;
        for(let time = 0; scheduled_sprite >= 0; time += 250, scheduled_sprite--)
            setTimeout(setAsciiSprite,time,scheduled_sprite);
    }
}

function setAsciiSprite(sprite_num) {
    ascii_space.current_sprite = sprite_num;
    blit_ascii();
    blit();
}

function blit_terminal() {
    if(!terminal.enabled) return;

    for(let row = 0; terminal.contents.length || row < screen_space.screen_height; row++) {
        for (let col = 0; terminal.contents || col < screen_space.screen_width; col++) {
            screen_space.contents[row][col] = terminal.contents[terminal.scroll_point + row][col];
        }
    }

    blit_ascii();
}

function blit_ascii() {
    for(let i = 0; i < ascii_space.contents.length; i++) {
        for (let j = 0; j < ascii_space.contents[0].length; j++) {
            ascii_space.contents[i][j] = ascii_space.sprites[ascii_space.current_sprite][i].charAt(j);
        }
    }
}

function blit() {
    let outputString = "";
    for(let i = 0; i < ascii_space.contents.length; i++) {
        for(let j = 0; j < ascii_space.contents[i].length; j++) {
            let temp = ascii_space.contents[i][j].charAt(0);
            if(temp === " " || temp === ' ') outputString += "&nbsp;";
            else outputString += ascii_space.contents[i][j].charAt(0);
        }
        outputString += "<br/>";
    }
    main.innerHTML = outputString;
}

init();